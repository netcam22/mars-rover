(()=>{"use strict";var t=["rectangle","kite","circle"],n={E:0,N:90,W:180,S:270},e={L:90,R:-90,M:0};function r(t){var e=Object.keys(n).find((function(e){return n[e]===t}));return void 0!==e?e:""}function o(t){return t*Math.PI/180}function i(t){if(n.hasOwnProperty(t))return n[t]}function a(t){return t>=360?t%360:t<0?360+t%360:t}function c(t,c,u){return function(t,c,u){var d=t,l=c;return u.split("").map((function(t,c){var u=function(t,c,u){var d,l,s,f,g=(d=c,r(a(n[t]+e[d]))),v=i(g),p=(l=t,s=Math.round(Math.cos(o(n[l]))),f=Math.round(Math.sin(o(n[l]))),[-0===s?Math.abs(s):s,-0===f?Math.abs(f):f]),m=u,h=p[0],I=p[1],b=u[0],M=u[1],A=function(t){if(e.hasOwnProperty(t))return e[t]}(c),L=A&&0!==A?-1*A:0,E=[h+b,I+M];if(0===A)if(y(E))m=E;else{var P=i(t);g=r(a(P=P?P+180:180)),p=[0,0]}else p=[0,0];return{vector:p,rotate:L,direction:g,angle:v,coordinates:m}}(l,t,d);return l=void 0!==u.direction?u.direction:l,d=u.coordinates,{vector:u.vector,rotate:u.rotate,direction:l,angle:i(l),coordinates:d}}))}(t,c,u)}var u,d,l=(u={id:"",name:"",position:[],direction:""},{setId:function(t){return u.id=t},getId:function(){return u.id},setName:function(t){return u.name=t},getName:function(){return u.name},setPosition:function(t){return u.position=t},getPosition:function(){return u.position},setDirection:function(t){return u.direction=t},getDirection:function(){return u.direction}}),s=(d={id:0,name:"",style:"rectangle",size:[0,0],layout:[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],occupied:void 0},{setId:function(t){return d.id=t},getId:function(){return d.id},setSize:function(t){return d.size=t},getSize:function(){return d.size},setStyle:function(t){return d.style=t},getStyle:function(){return d.style},setLayout:function(t){return d.layout=t},getLayout:function(){return d.layout},setOccupied:function(t,n){return function(t,n){var e=t[0],r=t[1];if(y([e,r])){var o=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}([],s.getLayout(),!0),i=o.length,a=[],c=a[0],u=a[1];if(n.length){var d=n[0],f=n[1];u=i-f-1,c=d}var g=i-r-1,v=e,p=o.map((function(t,e){return t.map((function(t,r){return e===g&&r===v?l.getId():n.length&&e===u&&r===c?0:t}))}));s.setLayout(p)}}(t,n)},isOccupied:function(t){return y(t)}});function f(n,e,r){var o;s.setId(e),s.setStyle(r),s.setSize((o=n,[parseInt(o[0]),parseInt(o[1])]));var i=function(n,e){var r,o,i=e[0],a=e[1];if(function(n){return t.includes(n)}(n)){if("rectangle"===n)return g([i,a]);if("kite"===n)return function(t){for(var n=2*t-1,e=new Array(n),r=0,o=0;o<n;o++)r=o<t?o+1:n-o,e[o]=new Array(r).fill(0);return e}(i);if("circle"===n)return o=g([2*(r=i)+1,2*r+1]).map((function(t,n){return t.map((function(t,e){return Math.pow(e-r,2)+Math.pow(n-r,2)<=Math.pow(r,2)?t:1}))})),o}return g([i,a])}(r,v(n));return s.setLayout(i)}function g(t){var n=t[0],e=t[1],r=new Array(n).fill(0);return new Array(e).fill(r)}function v(t){return[parseInt(t[0]),parseInt(t[1])]}function y(t){var n=t[0],e=t[1];if(n<0||e<0)return!1;var r=s.getLayout(),o=r.length;return e<o&&n<r[e].length&&(0===r[o-e-1][n]||r[o-e-1][n]===l.getId())}var p,m,h=(p={robotArray:[],plateauArray:[]},{addPlateau:function(t){return p.plateauArray.push(t)},getPlateauArray:function(){return p.plateauArray},addRobot:function(t){return p.robotArray.push(t)},updateCurrentRobot:function(t){return p.robotArray[p.robotArray.length-1]=t},getRobotArray:function(){return p.robotArray},emptyRobotArray:function(){return p.robotArray=[]}});function I(t,n){var e=function(t){return{position:v(t),direction:t[2]}}(n),r=e.position,o=e.direction,i=function(t,n,e,r){var o="".concat(n[0]).concat(t);if(l.setId(o),l.setName(n),l.setPosition(e),l.setDirection(r))return o}(h.getRobotArray().length,t,r,o),a={id:l.getId(),name:t,position:r,direction:o,move:void 0,destination:void 0,layout:s.getLayout(),journey:void 0};return h.addRobot(a),i}function b(t,n){return function(t,n){var e=function(t,n,e){if(y(t)){var r=c(t,n,e),o=r[r.length-1].coordinates,i=o[0],a=o[1],u=r[r.length-1].direction,d="".concat(i).concat(a).concat(u);return s.setOccupied([i,a],l.getPosition()),l.setPosition([i,a]),l.setDirection(u),{journey:r,destination:d}}return{journey:void 0,destination:void 0}}(l.getPosition(),l.getDirection(),t);if(e&&n===l.getId()){var r=e.journey,o=e.destination,i={id:n,name:l.getName(),position:l.getPosition(),direction:l.getDirection(),move:t,destination:o,layout:s.getLayout(),journey:r};return h.updateCurrentRobot(i),i}}(t,n)}function M(t,n,e){var r,o="";return t&&(null==t?void 0:t.destination)&&t.journey?(o+="Hello again, I am ".concat(t.name," and I have moved ").concat(t.move," and arrived at ").concat(t.destination),o+="I moved:",null===(r=t.journey)||void 0===r||r.forEach((function(t){var n=t.vector,e=t.rotate,r=t.direction,i=t.angle,a=t.coordinates;o+="Vector: ".concat(n,", Rotate: ").concat(e,", Direction: ").concat(r,", Angle: ").concat(i,", Coordinates: ").concat(a)}))):o+="Hello again, I am ".concat(n," and I was unable to make my journey as the start position ").concat(e," was not available."),o}null===(m=document.getElementById("robot-button"))||void 0===m||m.addEventListener("click",(function(){var t,n,e=document.getElementById("plateau-shape"),r=document.getElementById("plateau-size"),o=document.getElementById("plateau-data");if(o&&(o.innerHTML="".concat(e.value," ").concat(r.value)),e&&r){var i=function(t,n){if(t&&n)return function(t,n){h.emptyRobotArray();var e=h.getPlateauArray().length,r=f(t,e,n);return h.addPlateau({gridSize:t,plateau:r,style:n,id:e}),r}("".concat(t).concat(t),n)}(r.value,e.value);i&&(console.log("layout",i),t=e.value,(n=document.getElementById("my-planet"))&&(n.classList.remove("circle","rectangle","kite"),n.classList.add(t)),function(t){var n=document.getElementById("plateau-container");n&&(n.innerHTML="",t.forEach((function(t,e,r){var o=document.createElement("div");o.className="grid-container",o.id="".concat(e,"}"),n.appendChild(o);var i=t.map((function(t){return"auto"}));o.style.gridTemplateColumns=i.join(" "),t.forEach((function(t,n){if(1!==t){var i=document.createElement("div");i.className="grid-item",i.classList.add("grid-circle"),i.id="robot_".concat(r.length-e-1,"_").concat(n),i.style.width="".concat(100/r.length,"%"),i.style.padding="".concat(100/r.length,"% 0 0 0"),o.appendChild(i)}}))})))}(i),function(t){var n=A.inputs[0][1].split(""),e=n[0],r=n[1],o=document.getElementById("robot_".concat(parseInt(e),"_").concat(parseInt(r)));if(o){console.log("robot_".concat(parseInt(e),"_").concat(parseInt(r)));var i=document.createElement("img");i.className="grid-robot",i.id="start_".concat(e,"_").concat(r),i.style.position="absolute",i.style.width="100%",i.style.padding="100% 0 0 0",o.prepend(i),o.classList.remove("grid-circle")}}())}var a=document.getElementById("robot-data"),c=L||"no content found";c[0]&&(console.log(c[0]),a&&(a.innerHTML=c[0]))}));var A={gridSize:"66",gridStyle:"rectangle",inputs:[["Fred","12N","LMLMLMLMM"],["Bob","33E","MMRMMRMRRM"]],moves:"animate"},L=A.inputs.map((function(t){var n=t[0],e=t[1],r=t[2],o=function(t,n){return I(t,n)}(n,e);if(o)return"animate"===A.moves?M(b(r,o),n,e):r.split("").forEach((function(t){return M(b(t,o),n,e)}))}))})();